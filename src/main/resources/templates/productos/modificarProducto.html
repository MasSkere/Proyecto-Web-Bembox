<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title th:text="${producto.id} != null ? 'Editar Producto #' + ${producto.id} : 'Nuevo Producto'">Editar Producto</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/lucide.min.js"></script>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen">

  <!-- HEADER -->
  <header th:insert="fragments/header :: header"/>

  <!-- MAIN -->
  <main class="container mx-auto flex-grow p-6">
    <h1 class="text-2xl font-semibold mb-4"
        th:text="${producto.id} != null ? 'Editar Producto #' + ${producto.id} : 'Registrar Producto'">
      Editar Producto
    </h1>
    <form th:action="@{/productos/guardar}" th:object="${producto}" method="post"
          class="bg-white shadow rounded-lg p-6 space-y-4">
      <div>
        <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre</label>
        <input type="text" id="nombre" th:field="*{nombre}" required
               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"/>
      </div>
      <div>
        <label for="descripcion" class="block text-sm font-medium text-gray-700">Descripción</label>
        <textarea id="descripcion" th:field="*{descripcion}" rows="3"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"></textarea>
      </div>
      <div>
        <label for="categoria" class="block text-sm font-medium text-gray-700">Categoría</label>
        <select id="categoria" th:field="*{categoria.id}" required
                class="mt-1 block w-full border-gray-300 rounded-md">
          <option th:each="cat : ${categorias}"
                  th:value="${cat.id}"
                  th:text="${cat.nombre}"
                  th:selected="${cat.id} == ${producto.categoria.id}">
          </option>
        </select>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
          <label for="precio" class="block text-sm font-medium text-gray-700">Precio</label>
          <input type="number" id="precio" step="0.01" th:field="*{precio}" required
                 class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"/>
        </div>
        <div>
          <label for="stock" class="block text-sm font-medium text-gray-700">Stock</label>
          <input type="number" id="stock" th:field="*{stock}" required
                 class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"/>
        </div>
      </div>
      <div>
        <label for="imagenUrl" class="block text-sm font-medium text-gray-700">URL de Imagen</label>
        <input type="url" id="imagenUrl" th:field="*{imagenUrl}"
               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md"/>
      </div>
      <div class="flex justify-end space-x-2">
        <a th:href="@{/productos}"
           class="px-4 py-2 border border-gray-300 rounded hover:bg-gray-100">Cancelar</a>
        <button type="submit"
                class="bg-blue-800 text-white px-4 py-2 rounded hover:bg-blue-700">
          Guardar
        </button>
      </div>
    </form>
  </main>

  <!-- FOOTER -->
  <footer th:insert="fragments/footer :: footer"/>

  <script>lucide.createIcons()</script>
</body>
</html>
